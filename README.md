# Бот для проведения викторин

Это бот для Телеграма и ВК, который умеет проводить викторины.

## Требования

Для запуска вам понадобится Python 3.6 или выше и [Redis](https://redis.io/), в качестве базы данных.

Необходимо зарегистрировать бота и получить токен для доступа к API Телеграма. Подробная инструкция [как зарегистрировать бота](https://way23.ru/%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B2-telegram/)

В группе ВК, в меню справа находим пункт **Управление**, затем **Работа с API**, и создаем ключ доступа. Ключ понадобится чуть позже.
Далее идем **Сообщения ⟶ Настройки для бота** и включаем "Возможности ботов".

## Подготовка

Скачайте код с GitHub. Установите зависимости:

```sh
pip install -r requirements.txt
```

Скачайте и распакуйте [архив с вопросами](https://dvmn.org/media/modules_dist/quiz-questions.zip). Путь к одному из файлов надо будет вписать в переменные окружени.

## Переменные окружения

Настройки берутся из переменных окружения. Чтобы их определить, создайте файл `.env` в корне проекта и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступные переменные:

- `TG_TOKEN` — токен бота, который будет проводить викторины.
- `VK_ACCESS_KEY` — ключ доступа к группе VK.
- `REDIS_URL` — адрес для подключения к БД. Если Redis запушен на локальной машине, впишите `localhost`.
- `REDIS_PORT` — порт для подключения к БД, по-умолчанию `6379`.
- `QUIZ_PATH` — путь к файлу с вопросами для викторины.

Пример:

```env
TG_BOT_TOKEN=23052948:AAjh0e1U_vUkAZ0XZJUdfxjfUfwDLA0
VK_ACCESS_KEY=79a650716359a19ed9def1bb6172203e0b383a46c2ab089ba6dfebb88260d41145e9011
REDIS_URL=localhost
REDIS_PORT=6379
QUIZ_PATH=/path/to/quiz-questions.txt
```

## Запуск

Запустите бота для ВК:

```sh
python vk.py
```

Для Телеграма:

```sh
python tg.py
```

В случае успешного старта скрипт ничего не выводит и запускает бесконечный цикл. Остановить можно командой `Ctrl+C`.

## Цели проекта

Код написан в учебных целях — для курса по Python на сайте [Devman](https://dvmn.org/modules/chat-bots/)
